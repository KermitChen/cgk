<!DOCTYPE html>
<html>
	<head>
		<title>test2.html</title>
	</head>
	<body>
		<label id="labelId1"></label>
	</body>
	<script src='dwr/engine.js'></script>
	<script src='dwr/util.js'></script>
	<script src='dwr/interface/test2.js'></script>
	<script type="text/javascript">
		//激活反ajax功能
		dwr.engine.setActiveReverseAjax(true);
		dwr.engine.setAsync(true);

	    //模拟用户id，用于区分不同的访问者
		function guid() {
		    function S4() {
		       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
		    }
		    return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
		}

	    //告知后台在线等待接收信息的用户，
	    //msgType可以是不同的值，用户告知后台需要获取的实时信息
	    test2.onPageLoad("msgType@" + guid());
	    
	    //接收消息方法，java后台通过反ajax调用
	    function showMessage(sendMessages, clickEvent) {
			document.getElementById('labelId1').innerHTML = "当前时间：" + sendMessages;;
		}
			
		//重写错误方法，异常处理
		dwr.engine._errorHandler = function(message, ex) {
				
		};
	</script>
</html>
